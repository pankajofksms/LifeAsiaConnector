package org.dh.test;

import java.io.IOException;

import org.dh.LATransform;
import org.dh.metadata.MetaDataManager;

public class LATransformTest {

	public static void main(String[] args) throws IOException{
		LATransformTest test =new LATransformTest();
		//test.mainframeToXMLConverterTest();
	test.xmltoMainframeConverterTest();
	}
	
	public void xmltoMainframeConverterTest() throws IOException{
		MetaDataManager.getInstance().loadAllCopybookMetada();
		//String xmlRequest ="<?xml version='1.0' encoding='UTF-8'?><TerminalIllnessEnqWS xmlns='TerminalIllnessEnqWS'><REQMSG1><copybook filename='LDRHDR.txt'><LEADER-HEADER><MSGREFNO /><USRPRF>CCMSUSRUAT</USRPRF><WKSID>QPADEV000J</WKSID><OBJID>TIL</OBJID><VRBID>ENQ</VRBID><TOTMSGLNG>2500</TOTMSGLNG><OPMODE>1</OPMODE><CMTCONTROL>Y</CMTCONTROL><RSPMODE>1</RSPMODE><MSGINTENT>R</MSGINTENT><MORE-IND>N</MORE-IND><ERRLVL>0</ERRLVL><IGNORE-DRIVER-HELD /><SUPPRESS-RCLRSC /><FILLER /></LEADER-HEADER></copybook></REQMSG1><REQMSG2><copybook filename='SESSIONI.txt'><SESSIONI-REC><MSGID>SESSIONI</MSGID><MSGLNG>10</MSGLNG><MSGCNT>1</MSGCNT><FILLER /><SESSIONI-COMPANY>2</SESSIONI-COMPANY><SESSIONI-BRANCH>10</SESSIONI-BRANCH><SESSIONI-LANGUAGE>E</SESSIONI-LANGUAGE><SESSIONI-ACCTYR>0000</SESSIONI-ACCTYR><SESSIONI-ACCTMN>00</SESSIONI-ACCTMN></SESSIONI-REC></copybook></REQMSG2><REQMSG3><copybook filename='TILENQI.txt'><TILENQI-REC><MESSAGE-HEADER><MSGID>TILENQI</MSGID><MSGLNG>11</MSGLNG><MSGCNT>1</MSGCNT><FILLER /></MESSAGE-HEADER><MESSAGE-DATA><BGEN-SJC40><BGEN-SJC40-ACTION>C</BGEN-SJC40-ACTION><BGEN-SJC40-CHDRSEL>03187528</BGEN-SJC40-CHDRSEL></BGEN-SJC40></MESSAGE-DATA></TILENQI-REC></copybook></REQMSG3></TerminalIllnessEnqWS>";
		String xmlRequest ="<TerminalIllnessEnqWS><REQMSG1><copybook filename='LDRHDR.txt'><LEADER-HEADER><MSGREFNO/><USRPRF>CCMSUSRUAT</USRPRF><WKSID>QPADEV000J</WKSID><OBJID>TIL</OBJID><VRBID>ENQ</VRBID><TOTMSGLNG>2500</TOTMSGLNG><OPMODE>1</OPMODE><CMTCONTROL>Y</CMTCONTROL><RSPMODE>1</RSPMODE><MSGINTENT>R</MSGINTENT><MORE-IND>N</MORE-IND><ERRLVL>0</ERRLVL><IGNORE-DRIVER-HELD/><SUPPRESS-RCLRSC/><FILLER/></LEADER-HEADER></copybook></REQMSG1><REQMSG2><copybook filename='SESSIONI.txt'><SESSIONI-REC><MSGID>SESSIONI</MSGID><MSGLNG>10</MSGLNG><MSGCNT>1</MSGCNT><FILLER/><SESSIONI-COMPANY>2</SESSIONI-COMPANY><SESSIONI-BRANCH>10</SESSIONI-BRANCH><SESSIONI-LANGUAGE>E</SESSIONI-LANGUAGE><SESSIONI-ACCTYR>0000</SESSIONI-ACCTYR><SESSIONI-ACCTMN>00</SESSIONI-ACCTMN></SESSIONI-REC></copybook></REQMSG2><REQMSG3><copybook filename='TILENQI.txt'><TILENQI-REC><MESSAGE-HEADER><MSGID>TILENQI</MSGID><MSGLNG>11</MSGLNG><MSGCNT>1</MSGCNT><FILLER/></MESSAGE-HEADER><MESSAGE-DATA><BGEN-SJC40><BGEN-SJC40-ACTION>C</BGEN-SJC40-ACTION><BGEN-SJC40-CHDRSEL>03348456</BGEN-SJC40-CHDRSEL></BGEN-SJC40></MESSAGE-DATA></TILENQI-REC></copybook></REQMSG3></TerminalIllnessEnqWS>";
		LATransform transform =new LATransform();
		System.out.println("Output:"+transform.convertBusinessObjectToMainframe(xmlRequest, "getLAData"));
	}
	
	public void mainframeToXMLConverterTest() throws IOException{
		MetaDataManager.getInstance().loadAllCopybookMetada();
		String mainframeRequest ="55250052CCMSUSRUATQPADEV000JTIL       ENQ       007811EIAN0N 000000781                    210E000000TILENQO   0065100001          0334845600000000082849900+T4604557475ICICI Pru iProtect Smart SP   20180601201806010000000000000000000000000000000000+00000000082849900+00000000082849900INR010000000000000000000000000082849900+INR01    00000000000000000+    IPSS      S00  00000000000000000     0000000000000000000000000000000000+         00000000000000000+                   00000000000000000     0000000000000000000000000000000000+         00000000000000000+                   00000000000000000     0000000000000000000000000000000000+         00000000000000000+                   00000000000000000     0000000000000000000000000000000000+         00000000000000000+                   ";
		
		LATransform transform =new LATransform();
		System.out.println("Output:"+transform.convertMainframeToBusinessObject(mainframeRequest, "getLAData"));
		
//55250052CCMSUSRUATQPADEV000JTIL       ENQ       025001Y1RN0                                         SESSIONI  0001000001          210E000000TILENQI   0001100001          C03348456    		
	}
}
